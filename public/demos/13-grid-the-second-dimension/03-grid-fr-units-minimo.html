<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Fraction Wars â€” Understanding fr</title>
  <style>
    /* MiniMo safety */
    html,
    body {
      width: 100%;
      max-width: 100%;
      overflow-x: hidden;
    }

    *,
    *::before,
    *::after {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 1.25rem;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(circle at top, #0f172a 0, #020617 55%, #000 100%);
      color: #e5e7eb;
    }

    .shell {
      width: 100%;
      max-width: 100%;
      display: grid;
      gap: 1rem;
    }

    .header {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 1rem;
    }

    h1 {
      margin: 0;
      font-size: 1.05rem;
      font-weight: 800;
      letter-spacing: .02em;
    }

    .badge {
      font-size: .75rem;
      padding: .18rem .55rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, .4);
      opacity: .9;
      white-space: nowrap;
    }

    /* Starlight column reality: single-column first */
    .panel {
      display: grid;
      grid-template-columns: minmax(0, 1fr);
      gap: 1rem;
      width: 100%;
      align-items: start;
    }

    @media (min-width: 60rem) {
      .panel {
        grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      }
    }

    .card {
      border: 1px solid rgba(148, 163, 184, .25);
      border-radius: 16px;
      padding: 1rem;
      background: linear-gradient(180deg, rgba(15, 23, 42, .75), rgba(2, 6, 23, .65));
      box-shadow: 0 10px 30px rgba(0, 0, 0, .35);
      min-width: 0;
    }

    .card h2 {
      margin: 0 0 .6rem 0;
      font-size: 1rem;
      font-weight: 800;
    }

    .card p {
      margin: .45rem 0;
      opacity: .9;
      line-height: 1.35;
    }

    .muted {
      opacity: .78;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: .45rem;
      margin-top: .65rem;
    }

    .btn {
      appearance: none;
      border: 1px solid rgba(148, 163, 184, .35);
      background: rgba(2, 6, 23, .45);
      color: #e5e7eb;
      border-radius: 999px;
      padding: .4rem .65rem;
      font-size: .82rem;
      cursor: pointer;
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
      user-select: none;
    }

    .btn:hover {
      transform: translateY(-1px);
      border-color: rgba(226, 232, 240, .55);
      background: rgba(2, 6, 23, .6);
    }

    .btn[aria-pressed="true"] {
      border-color: rgba(56, 189, 248, .75);
      box-shadow: 0 0 0 3px rgba(56, 189, 248, .15);
    }

    .sliderRow {
      display: grid;
      gap: .5rem;
      margin-top: .9rem;
    }

    input[type="range"] {
      width: 100%;
    }

    .kvs {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: .82rem;
      opacity: .92;
      line-height: 1.35;
      background: rgba(2, 6, 23, .45);
      border: 1px solid rgba(148, 163, 184, .25);
      border-radius: 12px;
      padding: .65rem .75rem;
      min-width: 0;
      overflow-x: auto;
    }

    .stage {
      border-radius: 16px;
      border: 2px solid rgba(56, 189, 248, .55);
      background: rgba(2, 6, 23, .35);
      padding: .75rem;
      width: 100%;
      max-width: 41rem;
      /* usable width target */
      min-width: 0;
      overflow-x: auto;
    }

    .layout {
      display: grid;
      gap: .6rem;
      width: 100%;
      min-width: 0;
      /* template set by JS */
    }

    .item {
      border-radius: 14px;
      border: 1px solid rgba(236, 72, 153, .55);
      background: linear-gradient(180deg, rgba(236, 72, 153, .18), rgba(236, 72, 153, .08));
      padding: .6rem .7rem;
      min-width: 0;
    }

    .item strong {
      display: block;
      font-size: .9rem;
      margin-bottom: .15rem;
    }

    .note {
      font-size: .85rem;
      opacity: .85;
      line-height: 1.35;
      margin: 0;
    }
  </style>
</head>

<body>
  <div class="shell">
    <div class="header">
      <h1>Fraction Wars</h1>
      <span class="badge" id="badge">grid-template-columns: 1fr 1fr 1fr</span>
    </div>

    <div class="panel">
      <section class="card">
        <h2>Pick a track strategy</h2>
        <p class="muted">Resize the container and switch templates. See which layouts adapt gracefully.</p>

        <div class="controls" role="group" aria-label="Templates">
          <button class="btn" data-t="px" aria-pressed="false">px: 220 220 220</button>
          <button class="btn" data-t="pct" aria-pressed="false">%: 33 33 33</button>
          <button class="btn" data-t="fr" aria-pressed="true">fr: 1 1 1</button>
          <button class="btn" data-t="ratio" aria-pressed="false">fr ratio: 2 1 1</button>
          <button class="btn" data-t="mixed" aria-pressed="false">mixed: 14rem 2fr 1fr</button>
        </div>

        <div class="sliderRow">
          <label class="muted" for="w">Container max-width: <span id="wVal">41rem</span></label>
          <input id="w" type="range" min="22" max="41" value="41" />
        </div>

        <p class="note">
          <strong>Rule:</strong> fixed tracks are calculated first. <code>fr</code> divides whatever space is left.
        </p>
      </section>

      <section class="card">
        <h2>Stage</h2>
        <div class="kvs" id="kvs">grid-template-columns: 1fr 1fr 1fr</div>

        <div class="stage" id="stage">
          <main class="layout" id="layout">
            <div class="item"><strong>Column A</strong>Content block</div>
            <div class="item"><strong>Column B</strong>Content block</div>
            <div class="item"><strong>Column C</strong>Content block</div>
            <div class="item"><strong>Extra</strong>Auto-placement continues</div>
            <div class="item"><strong>Extra</strong>Grid keeps flowing</div>
            <div class="item"><strong>Extra</strong>Until you take control</div>
          </main>
        </div>

        <p class="note" style="margin-top:.75rem;">
          Pixels define. Fractions adapt.
        </p>
      </section>
    </div>
  </div>

  <script>
    const layout = document.getElementById('layout');
    const stage = document.getElementById('stage');
    const badge = document.getElementById('badge');
    const kvs = document.getElementById('kvs');
    const buttons = [...document.querySelectorAll('button[data-t]')];
    const slider = document.getElementById('w');
    const wVal = document.getElementById('wVal');

    const TEMPLATES = {
      px: '220px 220px 220px',
      pct: '33.33% 33.33% 33.33%',
      fr: '1fr 1fr 1fr',
      ratio: '2fr 1fr 1fr',
      mixed: '14rem 2fr 1fr'
    };

    let active = 'fr';

    function setPressed() {
      buttons.forEach(b => b.setAttribute('aria-pressed', String(b.dataset.t === active)));
    }

    function apply() {
      const tpl = TEMPLATES[active];
      layout.style.gridTemplateColumns = tpl;

      const rem = Number(slider.value);
      stage.style.maxWidth = rem + 'rem';

      badge.textContent = 'grid-template-columns: ' + tpl;
      kvs.textContent = 'grid-template-columns: ' + tpl + '  |  container max-width: ' + rem + 'rem';
      wVal.textContent = rem + 'rem';

      setPressed();
    }

    buttons.forEach(b => b.addEventListener('click', () => {
      active = b.dataset.t;
      apply();
    }));

    slider.addEventListener('input', apply);

    apply();
  </script>
</body>

</html>