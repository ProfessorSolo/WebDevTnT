<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Layering & Overlap Playground</title>
  <style>
    html, body { width:100%; max-width:100%; overflow-x:hidden; }
    *, *::before, *::after { box-sizing:border-box; }

    body{
      margin:0;
      padding:1.25rem;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(circle at top, #0f172a 0, #020617 55%, #000 100%);
      color:#e5e7eb;
    }

    .shell{ display:grid; gap:1rem; }

    .header{
      display:flex;
      justify-content:space-between;
      align-items:baseline;
      gap:1rem;
    }
    h1{ margin:0; font-size:1.05rem; font-weight:800; letter-spacing:.02em; }
    .badge{
      font-size:.75rem;
      padding:.18rem .55rem;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.4);
      opacity:.9;
      white-space:nowrap;
    }

    .panel{
      display:grid;
      grid-template-columns:minmax(0,1fr);
      gap:1rem;
      width:100%;
      align-items:start;
    }
    @media (min-width:60rem){
      .panel{ grid-template-columns:minmax(0,1fr) minmax(0,1fr); }
    }

    .card{
      border:1px solid rgba(148,163,184,.25);
      border-radius:16px;
      padding:1rem;
      background: linear-gradient(180deg, rgba(15,23,42,.75), rgba(2,6,23,.65));
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
      min-width:0;
    }

    .controls{ display:flex; flex-wrap:wrap; gap:.45rem; }
    .btn{
      appearance:none;
      border:1px solid rgba(148,163,184,.35);
      background: rgba(2,6,23,.45);
      color:#e5e7eb;
      border-radius:999px;
      padding:.4rem .65rem;
      font-size:.82rem;
      cursor:pointer;
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
      user-select:none;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(226,232,240,.55); background: rgba(2,6,23,.6); }
    .btn[aria-pressed="true"]{
      border-color: rgba(56,189,248,.75);
      box-shadow:0 0 0 3px rgba(56,189,248,.15);
    }

    .kvs{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size:.82rem;
      opacity:.92;
      line-height:1.35;
      background: rgba(2,6,23,.45);
      border:1px solid rgba(148,163,184,.25);
      border-radius:12px;
      padding:.65rem .75rem;
      overflow-x:auto;
      min-width:0;
      margin-top:.75rem;
      white-space:pre;
    }

    .stage{
      border-radius:16px;
      border:2px solid rgba(56,189,248,.55);
      background: rgba(2,6,23,.35);
      padding:.75rem;
      max-width:41rem;
      overflow-x:auto;
      min-width:0;
    }

    /* GRID */
    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(2, 6rem);
      gap:.6rem;
      min-width: 28rem;
      position: relative;
    }

    .layer{
      grid-area: 1 / 1 / -1 / -1;
      border-radius:14px;
      padding:.6rem .7rem;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:700;
      letter-spacing:.02em;
      user-select:none;
    }

    .base{
      background: linear-gradient(180deg, rgba(56,189,248,.25), rgba(56,189,248,.12));
      border:1px solid rgba(56,189,248,.7);
      z-index:1;
    }

    .overlay{
      background: linear-gradient(180deg, rgba(236,72,153,.35), rgba(236,72,153,.15));
      border:1px solid rgba(236,72,153,.8);
      z-index:2;
    }

    .badgeLayer{
      background: linear-gradient(180deg, rgba(250,204,21,.35), rgba(250,204,21,.15));
      border:1px solid rgba(250,204,21,.85);
      z-index:3;
      width: max-content;
      justify-self: end;
      align-self: start;
      margin:.35rem;
      padding:.35rem .55rem;
      font-size:.75rem;
      border-radius:999px;
    }

    .hidden{ display:none; }

    .note{
      margin:.75rem 0 0;
      font-size:.85rem;
      opacity:.85;
      line-height:1.35;
    }
  </style>
</head>
<body>
  <div class="shell">
    <div class="header">
      <h1>Layering & Overlap</h1>
      <span class="badge" id="badge">overlap: on</span>
    </div>

    <div class="panel">
      <section class="card">
        <div class="controls" role="group" aria-label="Layer controls">
          <button class="btn" id="toggleOverlap" aria-pressed="true">overlap: on</button>
          <button class="btn" data-layer="base" aria-pressed="true">base</button>
          <button class="btn" data-layer="overlay" aria-pressed="true">overlay</button>
          <button class="btn" data-layer="badge" aria-pressed="true">badge</button>
        </div>

        <div class="kvs" id="kvs"></div>

        <p class="note">
          All layers occupy the same grid cells. Z‑index controls who sits on top.
        </p>
      </section>

      <section class="card">
        <h2 style="margin:0 0 .6rem 0; font-size:1rem; font-weight:800;">Stage</h2>

        <div class="stage">
          <div class="grid" id="grid">
            <div class="layer base" id="base">base layer</div>
            <div class="layer overlay" id="overlay">overlay</div>
            <div class="layer badgeLayer" id="badgeLayer">badge</div>
          </div>
        </div>

        <p class="note">
          No absolute positioning. Still a grid.
        </p>
      </section>
    </div>
  </div>

  <script>
    const badge = document.getElementById('badge');
    const kvs = document.getElementById('kvs');

    const toggleOverlap = document.getElementById('toggleOverlap');
    const layerBtns = [...document.querySelectorAll('button[data-layer]')];

    const base = document.getElementById('base');
    const overlay = document.getElementById('overlay');
    const badgeLayer = document.getElementById('badgeLayer');

    let overlapOn = true;

    function update(){
      toggleOverlap.textContent = overlapOn ? 'overlap: on' : 'overlap: off';
      toggleOverlap.setAttribute('aria-pressed', String(overlapOn));
      badge.textContent = 'overlap: ' + (overlapOn ? 'on' : 'off');

      if(overlapOn){
        base.style.gridArea = '1 / 1 / -1 / -1';
        overlay.style.gridArea = '1 / 1 / -1 / -1';
        badgeLayer.style.gridArea = '1 / 1 / -1 / -1';
      } else {
        base.style.gridArea = '';
        overlay.style.gridArea = '';
        badgeLayer.style.gridArea = '';
      }

      kvs.textContent =
`/* overlap: ${overlapOn ? 'on' : 'off'} */
grid-area: 1 / 1 / -1 / -1
z-index:
  base    → 1
  overlay → 2
  badge   → 3`;
    }

    toggleOverlap.addEventListener('click', () => {
      overlapOn = !overlapOn;
      update();
    });

    layerBtns.forEach(btn => {
      const id = btn.dataset.layer;
      const el = id === 'base' ? base : id === 'overlay' ? overlay : badgeLayer;

      btn.addEventListener('click', () => {
        const hidden = el.classList.toggle('hidden');
        btn.setAttribute('aria-pressed', String(!hidden));
      });
    });

    update();
  </script>
</body>
</html>
