---
title: 'Scope the Magic'
description: 'Where and how your CSS variables live, override, and cascade through your layout.'
sidebar:
  order: 2
draft: false
---

import MiniMo from '../../../components/MiniMo.astro';

## Who Gets Which Spell?

Declaring CSS variables is cute.  
**Scoping** them is where they become a real superpower.

The question is always:

> â€œ_On which element do I store this value so the **right** things inherit it?_â€

Weâ€™ll use three main levels:

- **Global** â€” `:root` for siteâ€‘wide tokens
- **Section / context** â€” wrappers like `.lesson`, `.sidebar`, `.dialog`
- **Component** â€” local defaults on `.card`, `.button`, etc.

---

## ğŸŒ Global vs Local Scope

Global, in `:root`, is great for **design tokens** you want everywhere:

```css
:root {
  --page-bg: #020617;
  --page-text: #e5e7eb;
  --accent: #ff6ec7;
}
```

Then components can drink from that global well:

```css
.card {
  background: #020617;
  color: var(--page-text);
  border: 1px solid color-mix(in srgb, var(--accent) 18%, transparent);
}
```

But sometimes you need a different vibe in one area â€” a lab mode, a warning zone,
a â€œboss levelâ€ section.

Thatâ€™s where **local scope** comes in:

```css
.lab-section {
  --accent: #38bdf8; /* cyan accent just for this section */
}
```

Inside `.lab-section`, anything using `var(--accent)` picks up the new value.
Outside, the global `--accent` still wins.

---

## ğŸ§¬ Nested Overrides: The Cascade Still Rules

Variables donâ€™t dodge the cascade â€” they **use** it.

```css
:root {
  --panel-bg: #020617;
}

.lab-section {
  --panel-bg: #020617;
}

.lab-section .panel--warning {
  --panel-bg: #450a0a; /* deepest wins here */
}
```

For `.panel--warning`:

1. It looks for `--panel-bg` on itself â†’ finds `#450a0a`
2. If it didnâ€™t exist, it would climb to `.lab-section`
3. If still missing, it would fall back to `:root`

Same cascade rules you already know, just with fancier loot.

---

## ğŸ§± Component Defaults + External Overrides

A nice pattern: give components **safe defaults** on the component itself,  
then allow parents to override with variables.

```css
.card {
  --card-bg: #020617; /* component default */
  --card-radius: 1.25rem;

  background: var(--card-bg);
  border-radius: var(--card-radius);
}

.card--highlight {
  --card-bg: #0f172a;
}

.feature-strip {
  --card-bg: #1e293b; /* overrides all cards inside */
  --card-radius: 999px;
}
```

Priority order here:

1. Custom property declared **closest to the card**
2. Then parent wrappers (`.feature-strip`)
3. Then `:root`

Outside of all those, the component still looks fine because it brought its
own default values.

---

## ğŸ§ª MiniMo 02 â€” Scoped Studio

Letâ€™s see scope in action: three panels, **one** variable name.

<MiniMo
  src="/demos/css-variable-wizardry/minimo-02-scope-the-magic.html"
  title="MiniMo 03 â€” Scoped Studio"
  height="1024px"
/>

Hereâ€™s the core CSS behind that MiniMo:

```css
:root {
  --panel-bg: #020617;
  --panel-accent: #ff6ec7;
}

.scope-lab {
  --panel-bg: #020617;
}

.scope-lab__row--alt {
  --panel-bg: #020617;
  --panel-accent: #38bdf8; /* cyan, local to this row */
}

.scope-panel--alert {
  --panel-bg: #450a0a;
  --panel-accent: #f97373;
}

.scope-panel {
  background: radial-gradient(circle at top, var(--panel-bg), #020617 70%);
  border: 1px solid color-mix(in srgb, var(--panel-accent) 22%, transparent);
  box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.8), 0 18px 50px color-mix(in srgb, var(
            --panel-accent
          ) 16%, #020617);
}
```

Same variable names, different scopes, different moods.

Try:

- Changing `--panel-accent` on `:root`
- Overriding it on just one row
- Giving a single â€œalertâ€ card its own local override

Youâ€™ll feel exactly how far the magic reaches.

---

## ğŸ’¡ When to Pick Which Scope

Use this as a quick cheat sheet:

- `:root` â†’ brand tokens, layout scales, reusable design system values
- Section wrapper â†’ perâ€‘page themes, mode toggles, â€œlabâ€ sections, dark/light walls
- Component â†’ sane defaults so your UI never looks broken, even out of context

Variables donâ€™t replace the cascade.  
They give you **named hooks** to ride the cascade on purpose.

---

## â¡ï¸ Next Up

Weâ€™ve decided **who** sees which value.  
Next: **Theme Shifting Tricks** â€” flipping whole looks with a single class.
